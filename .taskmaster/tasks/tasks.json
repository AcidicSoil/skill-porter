{
  "master": {
    "tasks": [
      {
        "id": "1",
        "title": "Initialize Repository Structure, Domain Types, and Logging",
        "description": "Set up the Go module structure and implement the core domain types and logging infrastructure.",
        "details": "Initialize a new Go module (or sub-module). Create the directory structure as defined in the PRD (cmd/, internal/skillportertui/...). Implement `internal/skillportertui/domain/types.go` defining `SkillDir`, `ConversionStatus`, `Summary`, and `ConversionTarget` structs. Implement `internal/skillportertui/domain/messages.go` for Bubble Tea messages (`SkillsDiscoveredMsg`, `SkillConvertedMsg`, etc.). Implement `internal/skillportertui/logging/logger.go` with structured logging helpers (`Info`, `Error`) that write to stderr or a log file without ANSI codes.",
        "testStrategy": "Verify Go module compilation. Create unit tests for domain type constructors. Write a small test for the logger to ensure it formats JSON/text correctly and handles fields.",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [],
        "complexity": 2,
        "recommendedSubtasks": 0,
        "expansionPrompt": "No expansion needed. Focus on clean package separation.",
        "updatedAt": "2025-12-11T01:23:58.809Z"
      },
      {
        "id": "2",
        "title": "Implement Configuration Parsing Module",
        "description": "Create the configuration module to handle CLI flags, environment variables, and defaults.",
        "details": "Implement `internal/skillportertui/config/config.go` and `flags.go`. Define the `AppConfig` struct (`ScanRoot`, `RecursiveMode`, `DefaultTarget`, `OutBaseDir`, `AutoConvertMode`). Implement `LoadFromFlagsAndEnv()` to parse flags (using standard `flag` package) and environment variables (`SKILL_PORTER_ROOT`, etc.), applying precedence (CLI > Env > Defaults). Validate paths ensure they exist.",
        "testStrategy": "Unit tests checking precedence: ensure CLI flags override env vars, and env vars override defaults. Test validation logic with invalid paths.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "done",
        "subtasks": [],
        "complexity": 3,
        "recommendedSubtasks": 0,
        "expansionPrompt": "No expansion needed.",
        "updatedAt": "2025-12-11T01:24:50.978Z"
      },
      {
        "id": "3",
        "title": "Implement Skill Discovery Infrastructure",
        "description": "Develop the logic to recursively scan directories and identify valid skills.",
        "details": "Implement `internal/skillportertui/discovery/discovery.go`. Create `DiscoverSkills(root string, recursive bool)` function. It should walk the file system using `filepath.WalkDir`. Identify skills by the presence of `SKILL.md` or `gemini-extension.json`. Deduplicate directories. Populate and return a slice of `domain.SkillDir`. Handle permission errors gracefully.",
        "testStrategy": "Unit tests using a temporary directory structure with various combinations of valid skills, nested directories, and empty folders. Verify correct counts and metadata extraction.",
        "priority": "high",
        "dependencies": [
          "2"
        ],
        "status": "done",
        "subtasks": [],
        "complexity": 4,
        "recommendedSubtasks": 0,
        "expansionPrompt": "No expansion needed.",
        "updatedAt": "2025-12-11T01:25:35.277Z"
      },
      {
        "id": "4",
        "title": "Implement Conversion Command Builder and Executor",
        "description": "Create the infrastructure to build and execute the underlying `skill-porter` CLI commands.",
        "details": "Implement `internal/skillportertui/conversion/command_builder.go` to generate `skill-porter` command strings based on inputs (`convert <path> --to <target> --output <out>`). Implement `executor.go` using `os/exec` to run the commands. Capture stdout/stderr. Return exit codes and output. Ensure process execution is non-blocking to the main thread (prepare for async usage).",
        "testStrategy": "Unit tests for `BuildConvertCommand` to verify flag composition. Integration tests using a mock executable (or `true`/`false`) to verify `ExecuteConversion` handles exit codes and output capture correctly.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Implement Command Builder Logic",
            "description": "Develop the pure function logic to construct CLI arguments for the skill-porter binary based on conversion parameters.",
            "dependencies": [],
            "details": "Create `internal/skillportertui/conversion/command_builder.go`. Implement a function `BuildConvertCommand(inputPath, targetFormat, outputDir string) []string` that returns the argument slice (e.g., `[\"convert\", inputPath, \"--to\", targetFormat, \"--output\", outputDir]`). Ensure correct flag formatting and path handling.",
            "status": "pending",
            "testStrategy": "Unit tests verifying that specific input parameters result in the expected slice of command arguments.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Implement Process Executor with Output Capture",
            "description": "Create the execution wrapper using `os/exec` to run commands, handle contexts, and capture standard output and error streams.",
            "dependencies": [
              1
            ],
            "details": "Implement `internal/skillportertui/conversion/executor.go`. Create `ExecuteCommand(ctx context.Context, command string, args []string) (string, error)`. Use `exec.CommandContext` to support timeouts/cancellation. Capture `Stdout` and `Stderr` into buffers. Return combined output and error if the process exits with a non-zero code.",
            "status": "pending",
            "testStrategy": "Integration tests using dummy commands (like `echo` or `false`) to verify that stdout is captured correctly and exit codes are propagated as errors.",
            "parentId": "undefined"
          }
        ],
        "complexity": 5,
        "recommendedSubtasks": 2,
        "expansionPrompt": "Break down into: 1) The Command Builder (pure function logic) and 2) The Executor (os/exec wrapper with output capturing).",
        "updatedAt": "2025-12-11T01:26:27.601Z"
      },
      {
        "id": "5",
        "title": "Implement Basic TUI Model and List View",
        "description": "Set up the Bubble Tea model and the main list view for displaying discovered skills.",
        "details": "Implement `internal/skillportertui/ui/model.go` and `view.go`. Define the `Model` struct holding `AppConfig` and `[]SkillDir`. Implement `Init()` to trigger the discovery command. Implement `View()` using Lip Gloss to render a list of skills. Show rows with name, platform, and a status placeholder. Implement basic navigation (up/down) in `Update()`.",
        "testStrategy": "Visual verification by running a simple main wrapper. Unit tests for `Update` ensuring navigation changes the selected index correctly.",
        "priority": "medium",
        "dependencies": [
          "3",
          "4"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Define TUI Model Structure and Initialization",
            "description": "Define the primary Bubble Tea model struct and its initialization logic.",
            "dependencies": [],
            "details": "Create `internal/skillportertui/ui/model.go`. Define the `Model` struct containing fields for `AppConfig`, a slice of `domain.SkillDir` for the list data, a `cursor` integer for navigation state, and an `err` field. Implement the `Init()` method to return a `tea.Cmd` that triggers the skill discovery process.",
            "status": "pending",
            "testStrategy": "Unit test `Init` to ensure it returns the expected command type. Verify struct fields are initialized correctly with zero values.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Implement List View Rendering with Lip Gloss",
            "description": "Develop the visual rendering logic for the skill list using Lip Gloss styling.",
            "dependencies": [
              1
            ],
            "details": "Implement the `View() string` method in `internal/skillportertui/ui/view.go`. Iterate over the `skills` slice defined in the model. Use `lipgloss` to define styles for normal and selected rows. Render columns for Name, Platform, and Status, highlighting the row corresponding to the current `cursor` index.",
            "status": "pending",
            "testStrategy": "Visual verification by printing the output of `View()` with a mock model containing sample data to ensure styles and highlighting appear as expected.",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Implement Update Loop and Navigation Logic",
            "description": "Implement the update loop to handle keyboard navigation and state changes.",
            "dependencies": [
              1
            ],
            "details": "Implement the `Update(msg tea.Msg)` method in `model.go`. specific handlers for `tea.KeyMsg`. Map 'up', 'down', 'k', and 'j' keys to increment/decrement the `cursor` index, ensuring it stays within the bounds of the `skills` slice. Add handlers for 'q' and 'ctrl+c' to quit the application.",
            "status": "pending",
            "testStrategy": "Unit tests for the `Update` function: pass key messages (up/down) and assert that the `cursor` value changes correctly and respects list boundaries.",
            "parentId": "undefined"
          }
        ],
        "complexity": 6,
        "recommendedSubtasks": 3,
        "expansionPrompt": "Separate into: 1) Model definition and state management, 2) List view rendering (using Lip Gloss), 3) Update loop logic for basic navigation.",
        "updatedAt": "2025-12-11T01:29:41.830Z"
      },
      {
        "id": "6",
        "title": "Implement TUI Conversion Interaction and Details Panel",
        "description": "Connect the TUI list to the conversion engine and display results.",
        "details": "Update `ui/model.go` to handle key `c`. Trigger `conversion.ExecuteConversion` in a `tea.Cmd`. Handle `SkillConvertedMsg` and `ConversionErrorMsg` to update skill status (Pending -> Running -> Success/Failed). Implement `Skill Detail Panel` in `view.go` to show the output path or error logs of the selected skill. Implement the Footer to show summary counts.",
        "testStrategy": "Unit tests for `Update`: verify triggering conversion changes status to 'Running' and receiving a result message updates it to 'Success'/'Failed' and increments summary counters.",
        "priority": "medium",
        "dependencies": [
          "5"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Implement Async Conversion Command Trigger",
            "description": "Create the Bubble Tea command structure to execute conversions asynchronously without freezing the UI.",
            "dependencies": [],
            "details": "Create a `convertSkillCmd(skill *domain.SkillDir) tea.Cmd` function that wraps the `conversion.ExecuteConversion` logic (from Task 4). In `ui/model.go`'s `Update` function, handle the 'c' key press. When pressed, verify the selected item is valid, immediately set its status to 'Running' (optimistic update), and return the `convertSkillCmd` to the Bubble Tea runtime.",
            "status": "pending",
            "testStrategy": "Unit test the `Update` function: simulate a 'c' key press and assert that it returns a non-nil `tea.Cmd` and changes the selected item's status to 'Running'.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Implement Conversion Status Message Handling",
            "description": "Handle the asynchronous result messages from the conversion process to update application state and counters.",
            "dependencies": [
              1
            ],
            "details": "Define `SkillConvertedMsg` and `ConversionErrorMsg` structs containing the skill ID and result data. In the `Update` loop, add cases for these messages. When received, locate the specific skill in the model's slice and update its status to 'Success' or 'Failed' along with the result output/error log. Implement logic to increment `SuccessCount` and `FailCount` in the model.",
            "status": "pending",
            "testStrategy": "Create mock `SkillConvertedMsg` and `ConversionErrorMsg` objects and pass them to the `Update` function. specific assertions: verify the target skill status updates correctly and the summary counters increment.",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Implement Details Panel and Footer View",
            "description": "Create the visual components to display detailed logs for the selected skill and global summary statistics.",
            "dependencies": [
              2
            ],
            "details": "Modify `ui/view.go` to split the interface (likely using `lipgloss.JoinHorizontal`). The new Details Panel should render the `OutputPath` (if success) or `ErrorLog` (if failed) of the *currently selected* skill. Implement a status bar footer that renders the `Total`, `Success`, and `Failed` counts derived from the model state.",
            "status": "pending",
            "testStrategy": "Visual verification: Ensure the details pane updates content dynamically as the user navigates the list (up/down) and that the footer stays pinned to the bottom with correct formatting.",
            "parentId": "undefined"
          }
        ],
        "complexity": 7,
        "recommendedSubtasks": 3,
        "expansionPrompt": "Split into: 1) Async command triggering mechanism (`tea.Cmd`), 2) Message handling loop for status updates, 3) Details pane rendering logic.",
        "updatedAt": "2025-12-11T01:30:40.525Z"
      },
      {
        "id": "7",
        "title": "Create CLI Entrypoint and MVP Integration",
        "description": "Wire everything together in `main.go` to create a runnable binary.",
        "details": "Implement `cmd/skill-porter-tui/main.go`. Call `config.LoadFromFlagsAndEnv`. Initialize `ui.NewModel`. Run `tea.NewProgram`. On program exit, check the final model summary; if `Failed > 0`, `os.Exit(1)`. Ensure `stdout` is used for the TUI and `stderr` or a file for logs.",
        "testStrategy": "Build the binary. Run E2E manual test: launch tool, discover skills, convert one, and verify exit code matches success/failure of the conversion.",
        "priority": "medium",
        "dependencies": [
          "6"
        ],
        "status": "done",
        "subtasks": [],
        "complexity": 3,
        "recommendedSubtasks": 0,
        "expansionPrompt": "No expansion needed.",
        "updatedAt": "2025-12-11T01:31:09.455Z"
      },
      {
        "id": "8",
        "title": "Implement Advanced TUI Actions (Override, Auto-Convert, Rescan)",
        "description": "Add support for target overrides (`g`/`a`), auto-convert remaining, and rescan (`r`).",
        "details": "Update `ui/update.go`: Add handlers for `g` (force Gemini) and `a` (force Claude). Implement 'Auto-Convert Remaining' logic: iterate through pending skills and return a sequence of `tea.Cmd` batch or sequential triggers. Implement `r` to clear state and re-trigger discovery command.",
        "testStrategy": "Unit tests for `Update`: verify `g` triggers conversion with specific target. Verify rescan clears the skill list and statuses.",
        "priority": "medium",
        "dependencies": [
          "6"
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Implement Target Overrides and Auto-Convert Batch Logic",
            "description": "Add TUI handlers for specific target overrides and implement the batch command generation for auto-converting all pending skills.",
            "dependencies": [],
            "details": "Modify `ui/update.go` to intercept `g` and `a` keys. `g` should generate a conversion command for the selected skill with `target=gemini`, and `a` with `target=claude`. Implement the 'Auto-Convert' logic: iterate through the `Model.skills` slice, identify items with `Pending` status, and return a `tea.Batch` (or sequence) of conversion commands using the builder from Task 4. Ensure this logic is non-blocking to the UI thread.",
            "status": "pending",
            "testStrategy": "Unit test `Update` with a mock model state. Verify pressing `g` creates a command with the specific target flag. Verify the auto-convert action returns a slice of commands matching the count of pending items.",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Implement Rescan and State Reset Logic",
            "description": "Implement the 'r' key handler to clear the current application state and re-initialize the skill discovery process.",
            "dependencies": [],
            "details": "In `ui/update.go`, add a handler for the `r` key. This function must explicitly clear the `Model.skills` slice, reset navigation cursors (index 0), and return the `DiscoverSkills` `tea.Cmd` (defined in Task 3). This ensures the file system is re-walked and the list is refreshed without restarting the application.",
            "status": "pending",
            "testStrategy": "Initialize a Model with populated data. Trigger the `r` key event in `Update`. Assert that the returned model has an empty skill list and the returned command is of the expected discovery type.",
            "parentId": "undefined"
          }
        ],
        "complexity": 6,
        "recommendedSubtasks": 2,
        "expansionPrompt": "Separate: 1) Batch processing logic for 'Auto-Convert' (generating multiple commands), 2) State reset logic for 'Rescan'.",
        "updatedAt": "2025-12-11T01:31:49.783Z"
      },
      {
        "id": "9",
        "title": "Implement Gum Interoperability and Debug Logging",
        "description": "Add optional Gum integration for confirmations and debug flag support.",
        "details": "Implement `internal/skillportertui/guminterop/confirm.go`. Check if `gum` binary exists in PATH. If so, use `exec.Command(\"gum\", \"confirm\"...)` for quit/bulk actions. Fallback to internal TUI confirmation if missing. Update `config` to handle `--debug`. Update logger to respect debug mode (more verbose).",
        "testStrategy": "Test with and without `gum` installed (mocking PATH). Verify debug logs contain command arguments when flag is set.",
        "priority": "low",
        "dependencies": [
          "7",
          "8"
        ],
        "status": "done",
        "subtasks": [],
        "complexity": 4,
        "recommendedSubtasks": 0,
        "expansionPrompt": "No expansion needed.",
        "updatedAt": "2025-12-11T01:32:26.844Z"
      },
      {
        "id": "10",
        "title": "Final Documentation, Polish, and Edge Case Testing",
        "description": "Complete documentation and ensure robustness.",
        "details": "Write `docs/skill-porter-tui.md` with usage instructions, keybindings, and screenshots. Review Lip Gloss styles for consistent theming (colors for success/fail). Expand test coverage to handle edge cases like zero skills found, read-only directories, or immediate user quit.",
        "testStrategy": "Manual review of documentation. Run coverage report and add tests to meet the 80% threshold defined in the PRD.",
        "priority": "low",
        "dependencies": [
          "9"
        ],
        "status": "done",
        "subtasks": [],
        "complexity": 3,
        "recommendedSubtasks": 0,
        "expansionPrompt": "No expansion needed.",
        "updatedAt": "2025-12-11T01:32:54.626Z"
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2025-12-11T01:32:54.626Z",
      "taskCount": 10,
      "completedCount": 10,
      "tags": [
        "master"
      ]
    }
  }
}